/*

Straw - a MLTSHP Bookmarklet.
Source: https://mltshp.com/static/straw/source.js
Bookmarklet URL: javascript:void((function(){var%20e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','https://mltshp.com/static/straw/compact.js?r='+Math.random()*99999999);document.body.appendChild(e)})());
*/
(function(e){if(void 0!==e.MLTSHPStraw)e.MLTSHPStraw.toggle();else{var n=function(){var a=!!e.document.addEventListener;return{bind:function(b,d,c){var f=function(h){return c.apply(b,arguments)};a?b.addEventListener(d,f,!1):b.attachEvent("on"+d,f)}}}(),p=function(a,b){return function(){a.apply(b,arguments)}},q={style:function(a,b){var d=null;a.currentStyle?d=a.currentStyle[b]:e.getComputedStyle&&(d=e.document.defaultView.getComputedStyle(a,null).getPropertyValue(b));return d}},g=function(a,b,d){this.category=
a;this.asset=b;this.el=d};g.prototype.append_root=e.document.body;g.prototype.position=function(){var a=this.el,b=0,d=0;do{if("relative"==q.style(a,"position")){this.append_root=a;break}b+=a.offsetLeft;d+=a.offsetTop}while(a=a.offsetParent);return[b,d]};g.prototype.hide=function(){void 0!==this.view&&(this.view.style.display="none")};g.prototype.show=function(){void 0!==this.view&&(this.view.style.display="block")};g.prototype.draw_overlay=function(){var a=this.position(),b=this.width(),d=this.height(),
c=document.createElement("div"),f=this.append_root;c.className="mltshp-sf-overlay";c.style.left=a[0]+"px";c.style.top=a[1]+"px";c.style.width=b-4+"px";c.style.height=d-4+"px";300<b&&100<d&&(html='<span class="mltshp-sf-overlay-text" style="',html=html+"margin-top:"+(d-45)/2+"px;",html=html+"margin-left:"+(b-240)/2+"px;",html+='">Save on MLTSHP</span>',c.innerHTML=html);f.appendChild(c);this.view=c;n.bind(c,"click",p(this.click_overlay,this))};g.prototype.click_overlay=function(a){a.stopPropagation?
a.stopPropagation():a.cancelBubble=!0;left_location=screen.width/2-450;top_location=screen.height/2-300;a="width=850,height=650,menubar=yes,toolbar=yes,scrollbars=yes,resizable=yes,left="+left_location+",top="+top_location+"screenX="+left_location+",screenY="+top_location;e.open("https://mltshp.com/tools/p?url="+encodeURI(this.asset)+"&title="+encodeURI(e.document.title)+"&source_url="+encodeURI(e.location.href),"save_image",a)};g.prototype.height=function(){void 0===this._height&&(this._height=this.el.offsetHeight);
return this._height};g.prototype.width=function(){void 0===this._width&&(this._width=this.el.offsetWidth);return this._width};var m={_parse_query:function(a){a=a.split("&");for(var b=a.length,d={},c=0;c<b;c++){var f=a[c].split("=");d[f[0]]=f[1]}return d},videos:function(){for(var a=document.getElementsByTagName("embed"),b=a.length,d=document.getElementsByTagName("object"),c=d.length,f=[],h=0;h<b;h++){var l=a[h],k=l.getAttribute("flashvars");k&&(k=this._parse_query(k),k.video_id&&f.push({el:l,url:"http://www.youtube.com/watch?v="+
k.mJ1CSeNlRA4}))}for(h=0;h<c;h++)a=d[h],(b=a.getAttribute("data"))&&0<b.indexOf("vimeocdn")&&(b=a.getAttribute("id").replace("player","").split("_")[0],f.push({el:a,url:"http://vimeo.com/"+b}));return f},images:function(){for(var a=document.getElementsByTagName("img"),b=a.length,d=[],c=0;c<b;c++)100>a[c].offsetWidth||100>a[c].offsetHeight||d.push(a[c]);return d}};e.MLTSHPStraw={found:[],init:function(){this.initiated=!0;this.init_styles();this.find_assets();this.draw_overlays()},find_assets:function(){var a=
m.images(),b=a.length;m.videos();for(var d=[],c=0;c<b;c++)d.push(new g("image",a[c].src,a[c]));this.found=d},init_styles:function(){var a=document.createElement("style");a.setAttribute("type","text/css");void 0!==a.styleSheet?a.styleSheet.cssText="        .mltshp-sf-overlay {font-family: Helvetica,Arial,sans-serif;position: absolute; border: 4px solid #ff0080; text-align: center; cursor: pointer; z-index: 9999999; background-image:url('.'); }        .mltshp-sf-overlay-text {display: block; float: left; background-color: #ff0080; font-size: 24px; color: #fff; padding: 10px 20px; text-shadow: 3px 3px 0px #B5005A;         -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px;         -moz-box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.3); -webkit-box-shadow: 4px 4px rgba(0, 0, 0, 0.3); box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.3); }        .mltshp-sf-overlay:hover { border-color: #db008b}         .mltshp-sf-overlay:hover .mltshp-sf-overlay-text { background-color: #db008b; }       ":
a.innerHTML="        .mltshp-sf-overlay {font-family: Helvetica,Arial,sans-serif;position: absolute; border: 4px solid #ff0080; text-align: center; cursor: pointer; z-index: 9999999; background-image:url('.'); }        .mltshp-sf-overlay-text {display: block; float: left; background-color: #ff0080; font-size: 24px; color: #fff; padding: 10px 20px; text-shadow: 3px 3px 0px #B5005A;         -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px;         -moz-box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.3); -webkit-box-shadow: 4px 4px rgba(0, 0, 0, 0.3); box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.3); }        .mltshp-sf-overlay:hover { border-color: #db008b}         .mltshp-sf-overlay:hover .mltshp-sf-overlay-text { background-color: #db008b; }       ";
e.document.body.appendChild(a)},draw_overlays:function(){for(var a=0,b=this.found.length;a<b;a++)this.found[a].draw_overlay()},toggle:function(){if(this.initiated)for(var a=0,b=this.found.length;a<b;a++)this.found[a].hide();else this.find_assets(),this.draw_overlays();this.initiated=!this.initiated}};MLTSHPStraw.init()}})(window);
